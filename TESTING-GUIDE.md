# テスト実行ガイド

## 自動テスト（コマンドで実行可能）

### 1. APIテスト（データベースレベル）

```bash
npm run test:api
```

このテストでは以下を自動確認します：
- ✅ テストユーザーの作成
- ✅ 紹介システム（登録・承認・一覧取得）
- ✅ 契約実績管理（登録・一覧取得）
- ✅ 報酬計算ロジック
- ✅ 昇格フロー（条件チェック）
- ✅ 通知システム（作成・一覧取得）

### 2. HTTP APIエンドポイントテスト

開発サーバーが起動している状態で実行：

```bash
npm run dev
# 別のターミナルで
npm run test:api:http
```

このテストでは以下を自動確認します：
- ✅ 紹介API (`GET /api/referrals`)
- ✅ 契約API (`GET /api/contracts`)
- ✅ 通知API (`GET /api/notifications`)
- ✅ 昇格API (`GET /api/promotions/eligibility`)

### 3. シードデータ作成

基礎テストとアンケートのサンプルデータを作成：

```bash
npm run test:seed
```

## 手動テスト（ブラウザで確認が必要）

以下の機能は、ブラウザで実際に操作して確認する必要があります：

### UI機能のテスト

1. **ログイン・認証**
   - [ ] ログインが正常に動作するか
   - [ ] パスワードリセット機能が動作するか
   - [ ] ログアウトが正常に動作するか

2. **基礎テスト機能**
   - [ ] `/dashboard/basic-test` でテストが表示されるか
   - [ ] 10問の選択問題が表示されるか
   - [ ] 回答を選択できるか
   - [ ] 提出後に結果が表示されるか
   - [ ] 合格判定が正しく動作するか（70%以上）

3. **アンケート機能**
   - [ ] `/dashboard/survey` でアンケートが表示されるか
   - [ ] 10設問が表示されるか
   - [ ] 各設問に回答できるか（テキスト、テキストエリア、選択、ラジオボタン）
   - [ ] 提出後に完了メッセージが表示されるか

4. **LP面談機能**
   - [ ] `/dashboard/lp-meeting/request` で面談予約申請ができるか
   - [ ] 5つの希望日時を選択できるか
   - [ ] 申請後に申請済み状態になるか
   - [ ] 再申請ができないか（申請済みの場合）
   - [ ] 管理者側で面談が確認できるか
   - [ ] FPエイド側で面談が確認できるか

5. **FP昇格ページ**
   - [ ] `/dashboard/promotion` で条件が正しく表示されるか
   - [ ] 基礎テスト合格後に条件が更新されるか
   - [ ] LP面談完了後に条件が更新されるか
   - [ ] アンケート提出後に条件が更新されるか
   - [ ] すべての条件を満たすと申請ボタンが有効になるか

6. **紹介管理**
   - [ ] `/dashboard/referrals` で紹介コードが表示されるか
   - [ ] 紹介一覧が表示されるか

7. **契約管理**
   - [ ] `/dashboard/contracts` で契約一覧が表示されるか

8. **通知機能**
   - [ ] `/dashboard/notifications` で通知一覧が表示されるか
   - [ ] 通知を既読にできるか

## テスト手順の推奨順序

1. **自動テストを実行**
   ```bash
   npm run test:api
   npm run test:seed
   ```

2. **開発サーバーを起動**
   ```bash
   npm run dev
   ```

3. **手動テストを実行**
   - ログイン → 基礎テスト → アンケート → LP面談申請 → 昇格申請

4. **管理者側のテスト**
   - LP面談の確定
   - 昇格申請の承認

## 注意事項

- 自動テストはAPIの動作確認のみです
- UIの表示やユーザー体験は手動で確認する必要があります
- 本番環境にデプロイする前に、必ず手動テストを実施してください

